(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{23:function(e,t,n){e.exports=n(36)},24:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);n(24);var r=n(0),a=n.n(r),o=n(19),c=n.n(o),u=n(2),l=n(3),i=n(5),s=n(4),h=n(6),p=n(12),f=n(10),d=n(22),m=a.a.createContext({currentDog:{},currentCat:{},queue:{first:{}},people:[],person:"",adopted:[],error:null,setCurrentDog:function(){},clearCurrentDog:function(){},setCurrentCat:function(){},clearCurrentCat:function(){},setQueue:function(){},clearQueue:function(){},setPeople:function(){},clearPeople:function(){},setPerson:function(){},clearPerson:function(){},setAdopted:function(){},clearAdopted:function(){},setError:function(){},clearError:function(){},randomPet:function(){},cyclePets:function(){}}),E=m,g=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={currentDog:{},currentCat:{},queue:{first:{},requeue:function(){}},people:[],person:"",adopted:[],error:null},n.setCurrentDog=function(e){n.setState({currentDog:e})},n.clearCurrentDog=function(){n.setState({currentDog:{}})},n.setCurrentCat=function(e){n.setState({currentCat:e})},n.clearCurrentCat=function(){n.setState({currentCat:{}})},n.setQueue=function(e){console.log("QUEUE",e),n.setState({queue:e})},n.clearQueue=function(){n.setState({first:{},requeue:function(){}})},n.setPeople=function(e){n.setState({people:e})},n.clearPeople=function(){n.setState({users:[]})},n.setPerson=function(e){n.setState({person:e})},n.clearPerson=function(){n.setState({person:""})},n.setAdopted=function(e){n.setState({adopted:[].concat(Object(d.a)(n.state.adopted),[e])})},n.clearAdopted=function(){n.setState({adopted:[]})},n.setError=function(e){console.log(e),n.setState({error:e})},n.clearError=function(){n.setState({error:null})},n.randomPet=function(){Math.floor(100*Math.random())<50?n.handleAdoptDog():n.handleAdoptCat()},n.cyclePets=function(){n.context.person!==n.context.queue.first.value&&setTimeout((function(){this.randomPet()}),5e3)},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={currentDog:this.state.currentDog,currentCat:this.state.currentCat,queue:this.state.queue,people:this.state.people,person:this.state.person,adopted:this.state.adopted,error:this.state.error,setCurrentDog:this.setCurrentDog,clearCurrentDog:this.clearCurrentDog,setCurrentCat:this.setCurrentCat,clearCurrentCat:this.clearCurrentCat,setQueue:this.setQueue,clearQueue:this.clearQueue,setPeople:this.setPeople,clearPeople:this.clearPeople,setPerson:this.setPerson,clearPerson:this.clearPerson,setAdopted:this.setAdopted,clearAdopted:this.clearAdopted,setError:this.setError,clearError:this.clearError,randomPet:this.randomPet,cyclePets:this.cyclePets};return a.a.createElement(m.Provider,{value:e},this.props.children)}}]),t}(r.Component),C="https://petful-md.herokuapp.com",v={getPeople:function(){return fetch("".concat(C,"/people"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},addPerson:function(e){return fetch("".concat(C,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({person:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},j=(n(29),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleJoinQueue=function(e){e.preventDefault(),n.context.clearError(),n.context.clearPerson();var t=document.getElementById("name").value;return console.log("NAME",t),n.context.setPerson(t),v.addPerson(t).then((function(e){var t=n.props,r=t.location,a=t.history,o=(r.state||{}).from||"/adoptable";a.push(o)}))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h2",null,"The perfect pet is waiting for you!"),a.a.createElement("img",{src:"https://i.pinimg.com/736x/ae/c4/53/aec453161b2f33ffc6219d8a758307a9.jpg"})),a.a.createElement("form",{onSubmit:this.handleJoinQueue},a.a.createElement("h3",null,"Enter your name to join the queue!"),a.a.createElement("section",null,a.a.createElement("p",null,"Because our pets are so popular, you'll need to wait your turn to adopt. When you're up, you can pick the dog or cat that you want!")),a.a.createElement("input",{"aria-label":"name",type:"text",name:"name",id:"name",required:!0}),a.a.createElement("button",{type:"submit"},"Join")),a.a.createElement("section",null,a.a.createElement("h3",null,"Or just take a look at our pets:"),a.a.createElement(p.b,{to:"/adoptable"},a.a.createElement("button",null,"Adoptable Pets")," ")))}}]),t}(r.Component));j.contextType=E;var b=j,y=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pet,n=e.handleAdoptClick,r=!1;return this.context.queue&&(r=this.context.person===this.context.queue.first.value),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("img",{src:t.imageURL,alt:t.description}),a.a.createElement("h2",null,t.name),a.a.createElement("h4",null," ",t.breed),a.a.createElement("h4",null,t.age,"-year-old ",t.gender),a.a.createElement("p",null,t.story)),a.a.createElement("button",{type:"button",onClick:n,disabled:!r},"Adopt Me!"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("hr",{style:{width:"75%",border:"2px solid #000000",backgroundColor:"#000000"}}))}}]),t}(r.Component);y.contextType=E;var x=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"waiting"},a.a.createElement("ul",null,a.a.createElement("h2",null,"Waiting to Adopt"),a.a.createElement("li",null,this.props.first),a.a.createElement("li",null,this.props.second),a.a.createElement("li",null,this.props.third)))}}]),t}(r.Component),P={getDog:function(){return fetch("".concat(C,"/dogs"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteDog:function(){return fetch("".concat(C,"/dogs"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},O={getCat:function(){return fetch("".concat(C,"/cats"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteCat:function(){return fetch("".concat(C,"/cats"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},k=function e(t){Object(u.a)(this,e),this.value=t,this.next=null},D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(u.a)(this,e),this.first=t,this.last=n}return Object(l.a)(e,[{key:"enqueue",value:function(e){var t=new k(e);null===this.first&&(this.first=t),this.last&&(this.last.next=t),this.last=t}},{key:"dequeue",value:function(){if(null!==this.first){var e=this.first;return this.first=this.first.next,e===this.last&&(this.last=null),e.value}}},{key:"requeue",value:function(){if(null!==this.first){var e=this.dequeue();return this.enqueue(e),e}}}]),e}(),q=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imgSrc,n=e.name,r=e.owner;return a.a.createElement("div",null,a.a.createElement("img",{src:t,alt:"pet"}),a.a.createElement("p",null,"Pet: ",n),a.a.createElement("p",null,"Owner: ",r))}}]),t}(r.Component),A=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).cyclePeople=function(){n.context.person!==n.context.queue.first.value&&(Math.floor(100*Math.random())<50?n.handleDogClick():n.handleCatClick())},n.handleDogClick=function(){return P.deleteDog().then((function(e){var t=n.context.queue.requeue();e.owner=t,n.context.setAdopted(e)})).then((function(e){P.getDog().then((function(e){return n.context.setCurrentDog(e)})),n.setState({adopting:n.context.queue.first.value})}))},n.handleCatClick=function(){return O.deleteCat().then((function(e){var t=n.context.queue.requeue();e.owner=t,n.context.setAdopted(e)})).then((function(e){O.getCat().then((function(e){return n.context.setCurrentCat(e)})),n.setState({adopting:n.context.queue.first.value})}))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.clearCurrentDog(),this.context.clearCurrentCat(),this.context.clearError(),this.context.clearQueue(),this.interval=setInterval(this.cyclePeople.bind(this),3e3),Promise.all([O.getCat(),P.getDog(),v.getPeople()]).then((function(t){e.context.setCurrentDog(t[0]),e.context.setCurrentCat(t[0]);var n=new D;t[2].forEach((function(e){return n.enqueue(e)})),console.log(n),e.context.setQueue(n)})).catch((function(e){return console.error(e)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderQueue",value:function(){return a.a.createElement(x,{first:this.context.queue.first.value,second:this.context.queue.first.next.value,third:this.context.queue.first.next.next.value})}},{key:"renderDog",value:function(){return a.a.createElement(y,{pet:this.context.currentDog,type:"dog",handleAdoptClick:this.handleDogClick})}},{key:"renderCat",value:function(){return a.a.createElement(y,{pet:this.context.currentCat,type:"cat",handleAdoptClick:this.handleCatClick})}},{key:"render",value:function(){var e=this.context.adopted.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(q,{imgSrc:e.imageURL,name:e.name,owner:e.owner}))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("h1",null,"Adoptable Pets")),a.a.createElement("section",null,a.a.createElement("div",null,a.a.createElement("h2",null,"DOGS"),this.renderDog()),a.a.createElement("div",null,a.a.createElement("h2",null,"CATS"),this.renderCat())),a.a.createElement("div",null,a.a.createElement("h2",null,"Congrats to the new paw-rents!"),e))}}]),t}(r.Component);A.contextType=E;var S=A,w=(n(35),function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("main",null,a.a.createElement(p.b,{to:"/",style:{textDecoration:"none",color:"inherit"}},a.a.createElement("h1",null,"Petful")),a.a.createElement(f.c,null,a.a.createElement(f.a,{exact:!0,path:"/",component:b}),a.a.createElement(f.a,{exact:!0,path:"/adoptable",component:S}))))}}]),t}(r.Component));c.a.render(a.a.createElement(p.a,null,a.a.createElement(g,null,a.a.createElement(w,null))),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.54e03150.chunk.js.map